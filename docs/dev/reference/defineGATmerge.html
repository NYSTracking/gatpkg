<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Define GAT Merge Pattern — defineGATmerge • NYS EPHT GAT</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Define GAT Merge Pattern — defineGATmerge" />
<meta property="og:description" content="This function reads in the shapefile to be aggregated and the parameters to use.
It returns a list of the following elements:

A character vector in which the old IDs are replaced with the merged IDs,
for the crosswalk.


A data frame defining the polygons to be merged.


An integer representing the number of merges completed.


A string that includes any warnings generated during the merging.

" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NYS EPHT GAT</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/gat_changelog.html">Geographic Aggregation Tool (GAT) Change Log</a>
    </li>
    <li>
      <a href="../articles/gat_citation.html">Geographic Aggregation Tool (GAT) Citation Information</a>
    </li>
    <li>
      <a href="../articles/gat_prepare_shapefile.html">Preparing your shapefile for GAT</a>
    </li>
    <li>
      <a href="../articles/gat_results_eval.html">Assessing Geographic Aggregation Tool (GAT) Results</a>
    </li>
    <li>
      <a href="../articles/gat_setup.html">Geographic Aggregation Tool (GAT) Setup Instructions</a>
    </li>
    <li>
      <a href="../articles/gat_tech_notes.html">Geographic Aggregation Tool (GAT) Technical Notes</a>
    </li>
    <li>
      <a href="../articles/gat_troubleshooting.html">Geographic Aggregation Tool (GAT) Troubleshooting</a>
    </li>
    <li>
      <a href="../articles/gat_tutorial.html">Tutorial 1: GAT walkthrough</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ajstamm/gatpkg/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Define GAT Merge Pattern</h1>
    <small class="dont-index">Source: <a href='https://github.com/ajstamm/gatpkg/blob/master/R/defineGATmerge.R'><code>R/defineGATmerge.R</code></a></small>
    <div class="hidden name"><code>defineGATmerge.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function reads in the shapefile to be aggregated and the parameters to use.
It returns a list of the following elements:</p>
<ul>
<li><p>A character vector in which the old IDs are replaced with the merged IDs,
for the crosswalk.</p></li>
</ul>
<ul>
<li><p>A data frame defining the polygons to be merged.</p></li>
</ul>
<ul>
<li><p>An integer representing the number of merges completed.</p></li>
</ul>
<ul>
<li><p>A string that includes any warnings generated during the merging.</p></li>
</ul>

    </div>

    <pre class="usage"><span><span class='fu'>defineGATmerge</span><span class='op'>(</span></span>
<span>  <span class='va'>area</span>,</span>
<span>  <span class='va'>gatvars</span>,</span>
<span>  <span class='va'>mergevars</span>,</span>
<span>  exclist <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>  pwrepeat <span class='op'>=</span> <span class='cn'>FALSE</span>,</span>
<span>  adjacent <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>  pop <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>  minfirst <span class='op'>=</span> <span class='cn'>FALSE</span>,</span>
<span>  progressbar <span class='op'>=</span> <span class='cn'>TRUE</span></span>
<span><span class='op'>)</span></span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>area</th>
      <td><p>A spatial layer representing areas to be aggregated.</p></td>
    </tr>
    <tr>
      <th>gatvars</th>
      <td><p>A list of objects created by GAT. It contains the
strings myidvar, aggregator1, aggregator2, and boundary,
which are all variables in the area, the boolean popwt,
and the numbers minvalue1 and minvalue2.
Both aggregator1 and aggregator2 must be numeric and
myidvar must contain unique values.</p></td>
    </tr>
    <tr>
      <th>mergevars</th>
      <td><p>A list of string objects needed to aggregate the areas
in the GAT tool. It contains mergeopt1, similar1, and
similar2. The valid options for mergeopt1 are "closest",
"least", and "similar". If "similar" is selected, similar1
and similar2 must be numeric variables in the area and
similar2 cannot equal zero.</p></td>
    </tr>
    <tr>
      <th>exclist</th>
      <td><p>The settings to define areas to be excluded.</p></td>
    </tr>
    <tr>
      <th>pwrepeat</th>
      <td><p>A boolean denoting whether population weighting (if used)
should be recalculated each time two areas are merged
(TRUE) or if area centroids should be weighted with area
populations (FALSE). If population weighting is not used,
this option is ignored.</p></td>
    </tr>
    <tr>
      <th>adjacent</th>
      <td><p>A boolean denoting whether to force GAT to merge only
adjacent areas.</p></td>
    </tr>
    <tr>
      <th>pop</th>
      <td><p>A spatial layer containing underlying population values.</p></td>
    </tr>
    <tr>
      <th>minfirst</th>
      <td><p>A boolean denoting whether or not to select the most
desirable neighbor only from among the neighbors that
have values below the desired minimum. If no neighbors
are below the desired minimum, the most desirable of all
eligible neighbors is selected.</p></td>
    </tr>
    <tr>
      <th>progressbar</th>
      <td><p>A boolean denoting whether to display the progress bar.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For details on how merges are assigned, see
<a href='../doc/gat_tech_notes.html'>
<code><a href='../articles/gat_tech_notes.html'>vignette("gat_tech_notes", package = "gatpkg")</a></code></a>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span></span></span>
<span class='r-in'><span><span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span></span>
<span class='r-in'><span><span class='va'>gatvars</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span></span></span>
<span class='r-in'><span>  myidvar <span class='op'>=</span> <span class='st'>"ID"</span>,             <span class='co'># character variable of unique values</span></span></span>
<span class='r-in'><span>  aggregator1 <span class='op'>=</span> <span class='st'>"TOTAL_POP"</span>,  <span class='co'># numeric variable</span></span></span>
<span class='r-in'><span>  minvalue1 <span class='op'>=</span> <span class='fl'>5000</span>,</span></span>
<span class='r-in'><span>  maxvalue1 <span class='op'>=</span> <span class='fl'>15000</span>,</span></span>
<span class='r-in'><span>  aggregator2 <span class='op'>=</span> <span class='st'>"TOTAL_POP"</span>,  <span class='co'># numeric variable</span></span></span>
<span class='r-in'><span>  minvalue2 <span class='op'>=</span> <span class='fl'>5000</span>,</span></span>
<span class='r-in'><span>  maxvalue2 <span class='op'>=</span> <span class='fl'>15000</span>,</span></span>
<span class='r-in'><span>  boundary <span class='op'>=</span> <span class='st'>"COUNTY"</span>,        <span class='co'># character variable of non-unique values</span></span></span>
<span class='r-in'><span>  rigidbound <span class='op'>=</span> <span class='cn'>TRUE</span>,          <span class='co'># boolean to enforce boundary</span></span></span>
<span class='r-in'><span>  popwt <span class='op'>=</span> <span class='cn'>FALSE</span>,              <span class='co'># boolean for population weighting</span></span></span>
<span class='r-in'><span>  popvar <span class='op'>=</span> <span class='st'>"Pop"</span>              <span class='co'># aggregation variable in population laayer</span></span></span>
<span class='r-in'><span><span class='op'>)</span></span></span>
<span class='r-in'><span></span></span>
<span class='r-in'><span><span class='va'>mergevars</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span></span></span>
<span class='r-in'><span>  mergeopt1 <span class='op'>=</span> <span class='st'>"similar"</span>,    <span class='co'># string can be similar, closest, or least</span></span></span>
<span class='r-in'><span>  similar1 <span class='op'>=</span> <span class='st'>"AREAWATR"</span>,    <span class='co'># numeric variable</span></span></span>
<span class='r-in'><span>  similar2 <span class='op'>=</span> <span class='st'>"AREALAND"</span>,    <span class='co'># numeric variable without any zeros</span></span></span>
<span class='r-in'><span>  centroid <span class='op'>=</span> <span class='st'>"geographic"</span></span></span>
<span class='r-in'><span><span class='op'>)</span></span></span>
<span class='r-in'><span></span></span>
<span class='r-in'><span><span class='va'>exclist</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span></span></span>
<span class='r-in'><span>  var1 <span class='op'>=</span> <span class='st'>"TOTAL_POP"</span>, math1 <span class='op'>=</span> <span class='st'>"less than"</span>, val1 <span class='op'>=</span> <span class='fl'>500</span>,</span></span>
<span class='r-in'><span>  var2 <span class='op'>=</span> <span class='st'>"NONE"</span>, <span class='co'># if not "NONE", define math2 &amp; val2</span></span></span>
<span class='r-in'><span>  var3 <span class='op'>=</span> <span class='st'>"NONE"</span>  <span class='co'># if not "NONE", define math3 &amp; val3</span></span></span>
<span class='r-in'><span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='va'>my_merge</span> <span class='op'>&lt;-</span> <span class='fu'>defineGATmerge</span><span class='op'>(</span></span></span>
<span class='r-in'><span>    area <span class='op'>=</span> <span class='va'>hftown</span>, pop <span class='op'>=</span> <span class='va'>hfpop</span>, gatvars <span class='op'>=</span> <span class='va'>gatvars</span>, mergevars <span class='op'>=</span> <span class='va'>mergevars</span>,</span></span>
<span class='r-in'><span>    exclist <span class='op'>=</span> <span class='va'>exclist</span>, progressbar <span class='op'>=</span> <span class='cn'>FALSE</span>, pwrepeat <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span></span>
<span class='r-in'><span><span class='op'>}</span></span></span>
<span class='r-in'><span></span></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Abigail Stamm, Gwen Babcock, Centers for Disease Control and Prevention.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


