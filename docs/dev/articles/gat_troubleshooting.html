<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Geographic Aggregation Tool (GAT) Troubleshooting • NYS EPHT GAT</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Geographic Aggregation Tool (GAT) Troubleshooting">
<meta property="og:description" content="gatpkg">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NYS EPHT GAT</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/gat_changelog.html">Geographic Aggregation Tool (GAT) Change Log</a>
    </li>
    <li>
      <a href="../articles/gat_citation.html">Geographic Aggregation Tool (GAT) Citation Information</a>
    </li>
    <li>
      <a href="../articles/gat_prepare_shapefile.html">Preparing your shapefile for GAT</a>
    </li>
    <li>
      <a href="../articles/gat_results_eval.html">Assessing Geographic Aggregation Tool (GAT) Results</a>
    </li>
    <li>
      <a href="../articles/gat_setup.html">Geographic Aggregation Tool (GAT) Setup Instructions</a>
    </li>
    <li>
      <a href="../articles/gat_tech_notes.html">Geographic Aggregation Tool (GAT) Technical Notes</a>
    </li>
    <li>
      <a href="../articles/gat_troubleshooting.html">Geographic Aggregation Tool (GAT) Troubleshooting</a>
    </li>
    <li>
      <a href="../articles/gat_tutorial.html">Tutorial 1: GAT walkthrough</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ajstamm/gatpkg/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="gat_troubleshooting_files/header-attrs-2.20/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Geographic Aggregation Tool (GAT)
Troubleshooting</h1>
                        <h4 class="author">Abigail Stamm, Thomas Talbot,
and Gwen Babcock</h4>
            
            <h4 class="date">2023-03-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ajstamm/gatpkg/blob/master/vignettes/gat_troubleshooting.Rmd"><code>vignettes/gat_troubleshooting.Rmd</code></a></small>
      <div class="hidden name"><code>gat_troubleshooting.Rmd</code></div>

    </div>

    
    
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>These errors and warnings are related to GAT installation.</p>
<div id="i-got-an-error-about-xml-when-i-tried-to-install-gat" class="section level2">
<h2 class="hasAnchor">
<a href="#i-got-an-error-about-xml-when-i-tried-to-install-gat" class="anchor"></a>I got an error about XML when I tried to install GAT</h2>
<p>On Windows, run
<code>install.packages("https://cran.r-project.org/bin/windows/contrib/4.0/XML_3.99-0.5.zip", type = "binary", repos = NULL)</code>
to install the XML package. 3.99-0.5 is the latest XML version as of
August 2020.</p>
</div>
<div id="there-is-an-issue-with-the-package-installation" class="section level2">
<h2 class="hasAnchor">
<a href="#there-is-an-issue-with-the-package-installation" class="anchor"></a>There is an issue with the package installation</h2>
<p>Usually, the issue is that vignettes fail to install. To fix this,
uninstall gatpkg, restart R, and reinstall gatpkg.</p>
</div>
<div id="im-missing-library-permissions" class="section level2">
<h2 class="hasAnchor">
<a href="#im-missing-library-permissions" class="anchor"></a>I’m missing library permissions</h2>
<p>This message appears in the R console:</p>
<blockquote>
<p>Error in maptools::unionSpatialPolygons(myshps$original,
aggvars$Idlist) :<br>
isTRUE(gpclibPermitStatus()) is not TRUE</p>
</blockquote>
<p>This error appears due to a conflict between the packages rgeos and
rgdal. Reinstall rgdal after each update of rgeos to fix it.</p>
</div>
</div>
<div id="user-input" class="section level1">
<h1 class="hasAnchor">
<a href="#user-input" class="anchor"></a>User input</h1>
<p>These errors and warnings are related to the user input portion of
GAT.</p>
<div id="on-step-3-in-the-confirm-gat-settings-dialog-all-of-my-areas-are-excluded" class="section level2">
<h2 class="hasAnchor">
<a href="#on-step-3-in-the-confirm-gat-settings-dialog-all-of-my-areas-are-excluded" class="anchor"></a>On step 3 in the confirm GAT settings dialog, all of my areas are
excluded</h2>
<p>The areas are not excluded, but an incorrect number of areas is
displayed. If you rerun GAT and read in the settings from this run using
the “settings=” option, the correct value will be shown in the
confirmation dialog. This should be fixed as of v1.61.0.</p>
</div>
<div id="im-not-seeing-the-dialog-boxes" class="section level2">
<h2 class="hasAnchor">
<a href="#im-not-seeing-the-dialog-boxes" class="anchor"></a>I’m not seeing the dialog boxes</h2>
<p>The dialog boxes may be hidden beneath other windows. Close or
minimize extraneous windows or check the taskbar for an icon that looks
like a thin quill/feather.</p>
<p>Try reducing the number of geographical boundary nodes (by thinning
or simplifying polygons: see Thinning geographic boundaries in the <a href="../doc/gat_tech_notes.html">GAT technical notes</a>).</p>
</div>
</div>
<div id="running-gat" class="section level1">
<h1 class="hasAnchor">
<a href="#running-gat" class="anchor"></a>Running GAT</h1>
<p>These errors and warnings may occur while GAT is processing your
shapefile.</p>
<div id="gat-ran-but-my-shapefiles-wouldnt-save-and-gat-crashed" class="section level2">
<h2 class="hasAnchor">
<a href="#gat-ran-but-my-shapefiles-wouldnt-save-and-gat-crashed" class="anchor"></a>GAT ran, but my shapefiles wouldn’t save and GAT crashed</h2>
<p>GAT occasionally has trouble getting permission to write to network
drives. Try saving to your local computer, then transferring the
files.</p>
</div>
<div id="output-files-are-not-saved" class="section level2">
<h2 class="hasAnchor">
<a href="#output-files-are-not-saved" class="anchor"></a>Output files are not saved</h2>
<p>This message appears in the R console:</p>
<blockquote>
<p>Error in writeOGR(newmapwdata, userpathout, userfileout, driver =
“ESRI Shapefile”, :<br>
GDAL Error 4: Failed to open shapefile
C:/aggtest/output/testin.shp.<br>
It may be corrupt or read-only file accessed in update mode.</p>
</blockquote>
<p>Be sure to enter a valid file name in the save dialog. Remove all
files with extensions only (such as “.shp”, “.dbf”, “.prj”) from the
directory you are trying to save to.</p>
</div>
<div id="gat-is-very-slow" class="section level2">
<h2 class="hasAnchor">
<a href="#gat-is-very-slow" class="anchor"></a>GAT is very slow</h2>
<p>The progress bars were designed to help you determine whether GAT has
stalled. Using population weighted centroids, merging shapefiles with
thousands of polygons, and saving KML files can also cause GAT to run
slowly, so allow a few minutes for each of these steps. For any steps
besides saving files and population weighting, if a progress bar is not
updating at least once a minute, it is possible GAT has stalled and you
will need to restart R.</p>
</div>
<div id="warning-for-classint" class="section level2">
<h2 class="hasAnchor">
<a href="#warning-for-classint" class="anchor"></a>Warning for classInt</h2>
<p>This message appears in the R console:</p>
<blockquote>
<p>In classInt::classIntervals(newdata, n = breaks, style = “fixed”,
:<br>
n greater than number of different finite valuesreset to number of
different finite values</p>
</blockquote>
<p>This warning appears when the number of polygons or individual values
matches or is less than the number of categories in the choropleth maps.
The maps will still be drawn accurately.</p>
</div>
<div id="warning-for-st_centroid" class="section level2">
<h2 class="hasAnchor">
<a href="#warning-for-st_centroid" class="anchor"></a>Warning for st_centroid</h2>
<p>One or both of these messages appears in the R console:</p>
<blockquote>
<p>st_centroid assumes attributes are constant over geometries of x</p>
</blockquote>
<blockquote>
<p>st_centroid does not give correct centroids for longitude/latitude
data</p>
</blockquote>
<p>These warnings may appear when you first install gatpkg and will
appear if you use the population weighting option in GAT. They are not
errors and the centroids will still write correctly, assuming you are
using appropriate coordinate systems. They do not appear if you are
using geographic centroids.</p>
</div>
</div>
<div id="output-files" class="section level1">
<h1 class="hasAnchor">
<a href="#output-files" class="anchor"></a>Output files</h1>
<p>These errors and warnings are related to files produced by GAT.</p>
<div id="variable-names-in-my-aggregated-dataset-are-truncated" class="section level2">
<h2 class="hasAnchor">
<a href="#variable-names-in-my-aggregated-dataset-are-truncated" class="anchor"></a>Variable names in my aggregated dataset are truncated</h2>
<p>This appears to be an issue with the DBF driver used by the foreign
package. The driver identifies at least one variable name that it
interprets as too long (over 10 characters), but truncates several
variable names, not just the offender. The data otherwise still write
correctly. This should be fixed as of v1.61.0.</p>
</div>
<div id="when-i-import-my-shapefile-into-my-gis-program-a-blank-map-appears" class="section level2">
<h2 class="hasAnchor">
<a href="#when-i-import-my-shapefile-into-my-gis-program-a-blank-map-appears" class="anchor"></a>When I import my shapefile into my GIS program, a blank map
appears</h2>
<p>When importing a shapefile, be sure that the same projection is
selected in the GIS program as in the original shapefile. The
shapefile’s projection information is included in the log file generated
by GAT.</p>
</div>
<div id="no-kml-file-is-produced" class="section level2">
<h2 class="hasAnchor">
<a href="#no-kml-file-is-produced" class="anchor"></a>No KML file is produced</h2>
<p>Make sure to select that you want a KML file. Check the log file
generated by GAT to confirm that you requested one. Wait for the “NYS
Geographic Aggregation Tool is finished” message to display before
closing the windows/pop-ups generated by GAT.</p>
</div>
<div id="data-do-not-appear-in-google-earth" class="section level2">
<h2 class="hasAnchor">
<a href="#data-do-not-appear-in-google-earth" class="anchor"></a>Data do not appear in Google Earth</h2>
<p>When I click on a region in Google Earth, the data do not appear in
the description callout. The data may not appear in Google Earth 4.x, so
use Google Earth 5.0 or greater. Try clicking on the area’s link in the
left sidebar to see the data.</p>
</div>
<div id="the-legend-scales-for-my-before-and-after-maps-dont-match" class="section level2">
<h2 class="hasAnchor">
<a href="#the-legend-scales-for-my-before-and-after-maps-dont-match" class="anchor"></a>The legend scales for my before and after maps don’t match</h2>
<p>This issue occurs if there are too few polygons in the map. If the
total number of polygons is less than 2 plus the number of categories
(default is 7), the code that assigns the categories will force the
scale to be redefined. To fix this issue, use a smaller minimum value,
use a map with more polygons, or redefine the number of categories.
<em>This issue should be fixed now.</em></p>
</div>
<div id="warning-for-large-numbers-not-writing-correctly" class="section level2">
<h2 class="hasAnchor">
<a href="#warning-for-large-numbers-not-writing-correctly" class="anchor"></a>Warning for large numbers not writing correctly</h2>
<p>A message like this appears in the R console:</p>
<blockquote>
<p>In CPL_write_ogr(obj, dsn, layer, driver,
as.character(dataset_options), … : GDAL Message 1: Value 199678888 of
field ALAND of feature 40 not successfully written.</p>
</blockquote>
<p>This warning occurs when there are numeric fields with very large
values, such as square meters of land or water areas. In testing, the
output values matched the input values. You can verify this yourself by
checking the original DBF file against the crosswalk. To avoid this
warning, set large number fields to character or remove them from your
DBF before running GAT.</p>
</div>
<div id="my-aggregation-log-did-not-write-correctly" class="section level2">
<h2 class="hasAnchor">
<a href="#my-aggregation-log-did-not-write-correctly" class="anchor"></a>My aggregation log did not write correctly</h2>
<p>This appears to occur randomly. If you do not see your log file,
check that you have extensions showing in your file manager, as “.log”
may be hidden otherwise.</p>
<p>If you still do not see the file, you can try two things.</p>
<ol style="list-style-type: decimal">
<li>Restart R and rerun your aggregation.</li>
<li>Rerun the function <a href="../html/writeGATlog.html">writeGATlog()</a> by using
<code>settingsfile =</code> followed by the full file path to your
“*settings.Rdata” file produced by GAT. This will also work if your log
wrote incorrectly, which appears to occur randomly.</li>
</ol>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Abigail Stamm, Gwen Babcock, Centers for Disease Control and Prevention.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
